<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Article</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="navbar">
    <div class="logo">K-POP<br />NEWS</div>

    <button class="hamburger" onclick="toggleMenu()">â˜°</button>

    <nav class="nav-links" id="navLinks">
      <a href="index.html">Home</a>
          <a href="#">Groups</a>
      <a href="#">Contact</a>
  
      <a href="#">Playlists</a>
    </nav>
  </header>

  <main class="article-page">
    <section class="article-detail" id="articleContainer"></section>
    <aside class="trending">
      <h2>Trending Now</h2>
      <ul id="trendingList"></ul>
    </aside>
  </main>

  <script>
    function toggleMenu() {
      const nav = document.getElementById("navLinks");
      nav.classList.toggle("open");
    }

    const id = new URLSearchParams(window.location.search).get('id');

    fetch(`/api/articles/${id}`)
      .then(res => res.json())
      .then(article => {
        document.getElementById("articleContainer").innerHTML = `
          <h1>${article.title}</h1>
          <p><em>${article.date}</em></p>
          <img src="${article.image}" style="width:100%; border-radius:8px; margin:1rem 0;" />
          <div style="line-height:1.6;">${article.content}</div>`;
      });

    fetch('/api/articles')
      .then(res => res.json())
      .then(articles => {
        const list = document.getElementById("trendingList");
        articles.slice(0, 5).forEach(item => {
          const li = document.createElement('li');
          li.innerHTML = `<a href="article.html?id=${item._id}">
                  <img src="${item.image}" alt="${item.title}" />
                  <span>${item.title}</span>
                </a>`;

          list.appendChild(li);
        });
      });
  </script>
</body>
</html>
